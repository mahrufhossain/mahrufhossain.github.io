<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced: Parameter Sweeps (.STEP Command) - LTSpice Tutorial - Mahruf Hossain</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body class="antialiased">

    <header class="bg-white shadow-md py-4 sticky top-0 z-50 rounded-b-lg">
        <nav class="container mx-auto flex justify-between items-center px-4">
            <a href="../index.html" class="text-2xl font-bold text-gray-900 rounded-md p-2 hover:bg-gray-100 transition duration-300">Mahruf Hossain</a>
            <a href="ltspice_tutorial.html" class="text-gray-700 hover:text-teal-700 font-bold transition duration-300 rounded-md p-2 hover:bg-gray-100 hidden md:block">Back to Tutorials Index</a>
        </nav>
    </header>

    <main>
        <section id="parameter-sweep-content" class="section-padding bg-white rounded-xl shadow-lg mt-8 mx-4 md:mx-auto max-w-6xl py-12 mb-24">
            <div class="container mx-auto px-4">
                <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-6">6. Advanced: Parameter Sweeps (.STEP Command)</h1>
                <p class="text-gray-600 mb-6"><b>Parameter sweeps</b>, using the <b>.STEP command</b>, allow you to run a simulation multiple times while systematically varying a component value, a model parameter, or even a temperature. This is incredibly powerful for optimizing designs, performing tolerance analysis, or observing circuit behavior under different conditions.</p>

                <hr class="my-8 border-gray-300">

                <h2 id="setup-sweep-circuit" class="text-2xl font-semibold text-gray-700 mb-4 border-b pb-2">6.1 Setting Up Your Circuit for a Sweep</h2>
                <p class="text-gray-600 mb-4">To perform a parameter sweep, you first need to define a component value as a variable (or "parameter"). Let's use an <b>RC low-pass filter</b> as an example, sweeping the resistor value.</p>
                <ol class="list-decimal list-inside text-gray-600 mb-4 pl-4 space-y-2">
                    <li><b>New Schematic:</b> Open a new schematic (<b>File > New Schematic</b> or <b>Ctrl+N</b>).</li>
                    <li><b>Place Components:</b>
                        <ul class="list-disc list-inside text-gray-600 ml-6 mt-1 space-y-1">
                            <li>An AC Voltage Source (<b>voltage</b>): Right-click and set <b>AC Amplitude</b> to <b>1</b>.</li>
                            <li>A Resistor (<b>res</b>): <b>Right-click</b> on the resistor and for its <b>Resistance</b> value, instead of a number, type in a variable name like <b>{Rval}</b>. The curly braces `{}` are essential.</li>
                            <li>A Capacitor (<b>cap</b>): Right-click and set its <b>Capacitance</b> to <b>100n</b> (100 nanofarads).</li>
                            <li>A Ground (<b>GND</b>).</li>
                        </ul>
                    </li>
                    <li><b>Wire Circuit:</b> Connect them as a low-pass filter: Voltage Source (+) to Resistor, Resistor to Capacitor, Capacitor to Ground, Voltage Source (-) to Ground.</li>
                    <li><b>Add AC Analysis Command:</b> We'll still need an <b>AC Analysis</b> command to see the frequency response. Go to <b>Simulate > Edit Simulation Cmd</b>, select the <b>AC Analysis</b> tab, and set it to <b>Decade</b>, <b>100</b> points, <b>Start Frequency 10</b>, <b>Stop Frequency 1Meg</b>. Place the <b>.ac</b> directive on the schematic.</li>
                    <li><b>Save:</b> Save your circuit (e.g., <b>rc_sweep.asc</b>).</li>
                </ol>
                <img src="assets/sweep_circuit_schematic.png" alt="LTSpice Circuit with Parameter Variable" class="w-full h-auto rounded-lg shadow-md mb-6 border border-gray-200 mx-auto">
                <p class="text-gray-600 italic mb-6">The variable name (e.g., <b>Rval</b>) is case-sensitive and must be enclosed in curly braces for <b>LTSpice</b> to recognize it as a parameter for sweeping.</p>

                <hr class="my-8 border-gray-300">

                <h2 id="configure-step" class="text-2xl font-semibold text-gray-700 mb-4 border-b pb-2">6.2 Configuring the .STEP Command</h2>
                <p class="text-gray-600 mb-4">Now, let's define how our parameter <b>Rval</b> will change during the simulation.</p>
                <ol class="list-decimal list-inside text-gray-600 mb-4 pl-4 space-y-2">
                    <li>Go to <b>Simulate > Edit Simulation Cmd</b> from the menu bar.</li>
                    <li>In the <b>Edit Simulation Command</b> dialog box, select the <b>.step</b> tab.</li>
                    <li>Choose your <b>Type of Sweep</b>:
                        <ul class="list-disc list-inside text-gray-600 ml-6 mt-1 space-y-1">
                            <li><b>Linear:</b> Sweeps the parameter linearly from a <b>Start Value</b> to a <b>Stop Value</b> with a specified <b>Increment</b>. Good for uniform changes.
                                <br>Example: <b>.step param Rval 1k 10k 1k</b> (sweeps Rval from 1kΩ to 10kΩ in 1kΩ steps)</li>
                            <li><b>Decade / Octave:</b> Sweeps logarithmically. You specify the <b>Start Value</b>, <b>Stop Value</b>, and <b>Number of points per Decade/Octave</b>. Ideal for frequency-related components or when values span a wide range.
                                <br>Example: <b>.step param Rval dec 1k 100k 3</b> (3 points per decade from 1kΩ to 100kΩ)</li>
                            <li><b>List:</b> Allows you to specify an explicit list of values.
                                <br>Example: <b>.step param Rval list 1k 2.2k 4.7k 10k</b></li>
                        </ul>
                    </li>
                    <li>For our example, let's use <b>Linear</b>:
                        <ul class="list-disc list-inside text-gray-600 ml-6 mt-1 space-y-1">
                            <li><b>Name of global parameter:</b> Type <b>Rval</b> (matching the variable name you used).</li>
                            <li><b>Type of Sweep:</b> Select <b>Linear</b>.</li>
                            <li><b>Start Value:</b> Enter <b>1k</b>.</li>
                            <li><b>Stop Value:</b> Enter <b>5k</b>.</li>
                            <li><b>Increment:</b> Enter <b>1k</b>.</li>
                        </ul>
                    </li>
                    <li>Click <b>OK</b>. A <b>.step param Rval 1k 5k 1k</b> directive will appear on your cursor. Click to place it on your schematic.</li>
                </ol>
                <img src="assets/step_command_setup.png" alt="LTSpice .STEP Command Setup Dialog" class="w-full h-auto rounded-lg shadow-md mb-6 border border-gray-200 mx-auto">
                <p class="text-gray-600 mb-4 font-semibold">LTSpice Command (<b>.step</b> directive in schematic):</p>
                <pre class="bg-gray-800 text-white p-3 rounded-md text-sm overflow-x-auto mb-6"><code>.step param Rval 1k 5k 1k</code></pre>
                <p class="text-gray-600 italic mb-6">You can sweep various parameters, including model parameters (e.g., transistor W/L), temperature (via <b>.temp</b>), or even other sources.</p>

                <hr class="my-8 border-gray-300">

                <h2 id="analyze-sweep-results" class="text-2xl font-semibold text-gray-700 mb-4 border-b pb-2">6.3 Running the Simulation and Analyzing Results</h2>
                <p class="text-gray-600 mb-4">When you run a simulation with a <b>.STEP command</b>, <b>LTSpice</b> will perform a separate simulation for each value in your sweep. All results will be stored, allowing you to compare them.</p>
                <ol class="list-decimal list-inside text-gray-600 mb-4 pl-4 space-y-2">
                    <li>Go to <b>Simulate > Run</b> (or click the <b>Running Man</b> icon on the toolbar).</li>
                    <li>The plot window will open. If you click on the output of your RC filter (the node between the resistor and capacitor), you will see multiple overlapping waveforms, one for each step in your sweep.</li>
                    <li><b>Selecting Individual Steps:</b>
                        <ul class="list-disc list-inside text-gray-600 ml-6 mt-1 space-y-1">
                            <li><b>Right-click</b> anywhere on the plot background.</li>
                            <li>Select <b>Select Steps</b> from the context menu.</li>
                            <li>A dialog box will appear, listing all the individual steps performed. You can check/uncheck them to hide or show specific waveforms. This is invaluable for isolating and comparing results.</li>
                        </ul>
                    </li>
                    <li><b>Using Cursors:</b> You can use cursors on these plots just as you would with a single simulation. They will attach to the active trace, and you can switch between traces to compare values across different sweep steps.</li>
                </ol>
                <img src="assets/sweep_waveform_display.png" alt="LTSpice Parameter Sweep Waveform Display" class="w-full h-auto rounded-lg shadow-md mb-6 border border-gray-200 mx-auto">
                <p class="text-gray-600 italic mb-6">Observing how the cutoff frequency shifts with different resistor values in our example clearly demonstrates the power of parameter sweeps for understanding design trade-offs.</p>
                <p class="text-gray-600">The <b>.STEP command</b> is a fundamental tool for comprehensive circuit analysis and optimization in <b>LTSpice</b>, moving beyond single-point simulations to explore a design space.</p>
            </div>
        </section>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const navLinks = document.querySelectorAll('a[href^="#"]');
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        targetElement.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
        });
    </script>
</body>
</html>